(this["webpackJsonpbookstore-microsite"]=this["webpackJsonpbookstore-microsite"]||[]).push([[0],{118:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(23),r=n.n(o),s=n(19),i=(n(118),n(4)),c=n(7),l=n(21),d=n(11),u=n(14),j=n(103),b={getLocalRefreshToken:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.refreshToken},getLocalAccessToken:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.accessToken},updateNewAccessToken:function(e){var t=JSON.parse(localStorage.getItem("user"));t.accessToken=e,localStorage.setItem("user",JSON.stringify(t))},getUser:function(){return JSON.parse(localStorage.getItem("user"))},setUser:function(e){localStorage.setItem("user",JSON.stringify(e))},removeUser:function(){localStorage.removeItem("user")},getUsername:function(){var e=JSON.parse(localStorage.getItem("user"));return null===e||void 0===e?void 0:e.username}},v=n.n(j).a.create({baseURL:"https://bookstore-folly.herokuapp.com",headers:{"Content-Type":"application/json"}});v.interceptors.request.use((function(e){var t=b.getLocalAccessToken(),n=b.getUsername();return t&&(e.headers.Authorization="Bearer "+t,e.headers.Username=n),e}),(function(e){return Promise.reject(e)})),v.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(Object(d.a)().mark((function e(t){var n,a,o;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,!t.response){e.next=18;break}if(401!==t.response.status||n._retry){e.next=18;break}return n._retry=!0,e.prev=4,e.next=7,v.post("/api/auth/token/refresh",{refreshToken:b.getLocalRefreshToken()});case 7:return a=e.sent,console.log("response",a),o=a.data.accessToken,console.log("updateNewAccessToken",o),b.updateNewAccessToken(o),e.abrupt("return",v(n));case 15:return e.prev=15,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 18:return e.abrupt("return",Promise.reject(t));case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}());var p=v,O={signup:function(e,t,n,a,o){return p.post("/api/auth/signup",{username:e,firstname:t,lastname:n,email:a,password:o}).then((function(e){return e.data.accessToken&&b.setUser(e.data),e.data}))},login:function(e,t){return p.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data.accessToken&&b.setUser(e.data),e.data}))},logout:function(){b.removeUser()},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},h=n(215),m=n(104),x=n(217),f=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),c=s[0],l=s[1],d=Object(a.useState)(""),u=Object(i.a)(d,2);return{show:n,setShow:o,title:c,setTitle:l,message:u[0],setMessage:u[1]}},g=n(2),k=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),j=s[0],b=s[1],v=Object(l.a)(f),p=v.setShow,k=v.setMessage,y=Object(a.useState)({}),w=Object(i.a)(y,2),S=w[0],C=w[1],T=Object(a.useState)(!1),N=Object(i.a)(T,2),R=N[0],P=N[1],E=Object(c.m)(),U=function(){var e=Object(u.a)(Object(d.a)().mark((function e(t){var a,o,r,s,i,c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=I(),!(Object.keys(a).length>0)){e.next=7;break}C(a),P(!1),e.next=19;break;case 7:return P(!0),e.prev=8,e.next=11,O.login(n,j).then((function(){E(-1)||E("/home"),window.location.reload()}),(function(e){var t,n,a,o,r="Username or password incorrect";"ERROR"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data[0])||void 0===n?void 0:n.responseType)&&(r=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(o=a.data[0])||void 0===o?void 0:o.message);p(!0),k(r)}));case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(8),s="Unexpected error. Please try again!","ERROR"===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.responseType)&&(s=null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(c=i.data[0])||void 0===c?void 0:c.message),p(!0),k(s);case 19:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e={};return n&&""!==n||(e.username="Username cannot be blank!"),j&&""!==j||(e.password="Password cannot be blank!"),e};return Object(g.jsx)("article",{style:{padding:"50px"},children:Object(g.jsxs)(h.a,{noValidate:!0,validated:R,onSubmit:U,children:[Object(g.jsx)("h3",{children:"Login"}),Object(g.jsxs)(h.a.Group,{as:m.a,md:"4",className:"mb-3",controlId:"username",children:[Object(g.jsx)(h.a.Label,{children:"Username"}),Object(g.jsx)(h.a.Control,{type:"text",placeholder:"Enter username",value:n,onChange:function(e){return o(e.target.value)},isInvalid:!!S.username}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:S.username})]}),Object(g.jsxs)(h.a.Group,{as:m.a,md:"4",className:"mb-3",controlId:"password",children:[Object(g.jsx)(h.a.Label,{children:"Password"}),Object(g.jsx)(h.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){return b(e.target.value)},isInvalid:!!S.password}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:S.password})]}),Object(g.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"})]})})},y=n(209),w=n(218),S=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),j=s[0],b=s[1],v=Object(a.useState)(""),p=Object(i.a)(v,2),k=p[0],S=p[1],C=Object(a.useState)(""),T=Object(i.a)(C,2),N=T[0],R=T[1],P=Object(a.useState)(""),E=Object(i.a)(P,2),U=E[0],I=E[1],L=Object(a.useState)(""),B=Object(i.a)(L,2),D=B[0],F=B[1],G=Object(a.useState)({}),A=Object(i.a)(G,2),J=A[0],q=A[1],z=Object(a.useState)(!1),M=Object(i.a)(z,2),V=M[0],H=M[1],$=Object(c.m)(),Y=Object(l.a)(f),_=Y.setShow,Z=Y.setMessage,W=function(){var e={};n&&""!==n?n.length<3?e.username="Username is too short!":n.length>20&&(e.username="Username is too long!"):e.username="Username cannot be blank!",j&&""!==j?j.length<3?e.firstname="First name is too short!":j.length>20&&(e.firstname="First name is too long!"):e.firstname="First name cannot be blank!",k&&""!==k?k.length<3?e.lastname="Last name is too short!":k.length>20&&(e.lastname="Last name is too long!"):e.lastname="Last name cannot be blank!";N&&""!==N?/[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,8}(.[a-z{2,8}])?/g.test(N)||(e.email="Email is not valid!"):e.email="Email cannot be blank!";var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");return U&&""!==U?t.test(U)||(e.password="Password must contain at least 1 lowercase, 1 uppercase, 1 digit and 1 special character, alphabetical character!"):e.password="Password cannot be blank!",D&&0===D.localeCompare(U)||(e.confirmPassword="Passwords are different!"),e},K=function(){var e=Object(u.a)(Object(d.a)().mark((function e(t){var a,o,r,s,i,c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=W(),!(Object.keys(a).length>0)){e.next=7;break}q(a),H(!1),e.next=19;break;case 7:return H(!0),e.prev=8,e.next=11,O.signup(n,j,k,N,U).then((function(e){_(!0),Z("Welcome onboard "+j+" "+k),setTimeout((function(){$("/home"),window.location.reload()}),1e3)}),(function(e){var t,n,a,o,r="Unexpected error. Please try again!";"ERROR"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data[0])||void 0===n?void 0:n.responseType)&&(r=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(o=a.data[0])||void 0===o?void 0:o.message);_(!0),Z(r)}));case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(8),s="Unexpected error. Please try again!","ERROR"===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.responseType)&&(s=null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(c=i.data[0])||void 0===c?void 0:c.message),_(!0),Z(s);case 19:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("article",{style:{padding:"50px"},children:Object(g.jsxs)(h.a,{noValidate:!0,validated:V,onSubmit:K,children:[Object(g.jsx)("h3",{children:"Sign up"}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"username",children:[Object(g.jsx)(h.a.Label,{children:"Username"}),Object(g.jsx)(h.a.Control,{required:!0,type:"text",placeholder:"Username",value:n,onChange:function(e){return o(e.target.value)},isInvalid:!!J.username}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.username})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"firstname",children:[Object(g.jsx)(h.a.Label,{children:"First name"}),Object(g.jsx)(h.a.Control,{required:!0,type:"text",placeholder:"firstname",value:j,onChange:function(e){return b(e.target.value)},isInvalid:!!J.firstname}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.firstname})," "]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"lastname",children:[Object(g.jsx)(h.a.Label,{children:"Last name"}),Object(g.jsx)(h.a.Control,{required:!0,type:"text",placeholder:"lastname",value:k,onChange:function(e){return S(e.target.value)},isInvalid:!!J.lastname}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.lastname})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"email",children:[Object(g.jsx)(h.a.Label,{children:"Email"}),Object(g.jsxs)(w.a,{hasValidation:!0,children:[Object(g.jsx)(w.a.Text,{id:"inputGroupPrepend",children:"@"}),Object(g.jsx)(h.a.Control,{type:"text",placeholder:"Email","aria-describedby":"inputGroupPrepend",required:!0,value:N,onChange:function(e){return R(e.target.value)},isInvalid:!!J.email}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.email})]})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"password",children:[Object(g.jsx)(h.a.Label,{children:"Password"}),Object(g.jsx)(h.a.Control,{required:!0,type:"password",placeholder:"password",value:U,onChange:function(e){return I(e.target.value)},isInvalid:!!J.password}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.password})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"5",controlId:"confirmPassword",children:[Object(g.jsx)(h.a.Label,{children:"Confirm password"}),Object(g.jsx)(h.a.Control,{required:!0,type:"password",placeholder:"Confirm password",value:D,onChange:function(e){return F(e.target.value)},isInvalid:!!J.confirmPassword}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.confirmPassword})]})}),Object(g.jsx)(x.a,{type:"submit",children:"Sign up"})]})})},C=n(3),T={getBookCount:function(){return p.get("/api/book/count")},getAllBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p.get("/api/book/books?page="+e+"&size="+t)},createBook:function(e,t,n){return p.post("/api/book/create",{title:e,description:t,price:n}).then((function(e){return e.data}))},readBook:function(e){return p.get("/api/book/"+e)},updateBook:function(e,t,n,a){return p.put("/api/book/update",{id:e,title:t,description:n,price:a}).then((function(e){return e.data}))},deleteBook:function(e){return p.delete("/api/book/delete/"+e).then((function(e){return e.data}))}},N=T,R=(n(140),n(141),n(105)),P=n.n(R),E=n(106),U=n.n(E),I=n(107),L=n.n(I),B=n(213),D=n(216),F=n(214),G=n(210),A=n(211),J=n(212),q=function(e){var t,n,o,r,s,d=Object(c.m)(),u=e.book,j=e.user,b=e.view,v=void 0!==b&&b,p=Object(a.useState)(u),O=Object(i.a)(p,1)[0],h=Object(a.useState)(j),m=Object(i.a)(h,1)[0],k=Object(a.useState)(v),y=Object(i.a)(k,1)[0],w=Object(a.useState)(!1),S=Object(i.a)(w,2),C=S[0],T=S[1],R=Object(l.a)(f),P=R.setShow,E=R.setMessage,U=function(){return T(!1)},I=function(e){d("/book/view?id="+e.id)},L=function(e){N.deleteBook(null===e||void 0===e?void 0:e.id).then((function(t){P(!0),E("Deleted book "+(null===e||void 0===e?void 0:e.title)),setTimeout((function(){d("/"),window.location.reload()}),1e3)}),(function(t){var n,a;console.log(JSON.stringify(t));var o,r,s="Unable to delete book "+(null===e||void 0===e?void 0:e.title)+". Please try again!";"ERROR"===(null===t||void 0===t||null===(n=t.response)||void 0===n||null===(a=n.data[0])||void 0===a?void 0:a.responseType)&&(s=null===t||void 0===t||null===(o=t.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.message);P(!0),E(s)}))};return Object(g.jsxs)("div",{children:[Object(g.jsxs)(D.a,{style:{width:"auto",marginTop:"1.8rem"},children:[Object(g.jsxs)(D.a.Body,{children:[Object(g.jsxs)(D.a.Title,{children:[Object(g.jsx)("strong",{children:"Title:"})," ",O.title]}),Object(g.jsxs)(D.a.Subtitle,{children:[Object(g.jsx)("strong",{children:"Author:"})," ",null===O||void 0===O||null===(t=O.authorDto)||void 0===t?void 0:t.firstname," ",null===O||void 0===O||null===(n=O.authorDto)||void 0===n?void 0:n.lastname]}),Object(g.jsxs)(D.a.Subtitle,{className:"mb-2 text-muted",children:[Object(g.jsx)("strong",{children:"Price:"}),Object(g.jsxs)("span",{children:["$",O.price]})]}),Object(g.jsxs)(D.a.Text,{children:[Object(g.jsx)("strong",{children:"Description:"})," ",O.description]})]}),Object(g.jsxs)(D.a.Body,{children:[m&&O.authorDto.username===m.username&&Object(g.jsxs)("div",{children:[y&&Object(g.jsx)(D.a.Link,{onClick:function(){return I(O)},children:Object(g.jsx)(G.a,{})}),Object(g.jsx)(D.a.Link,{href:"/book/edit?id="+(null===O||void 0===O?void 0:O.id)+"&title="+(null===O||void 0===O?void 0:O.title)+"&description="+(null===O||void 0===O?void 0:O.description)+"&price="+(null===O||void 0===O?void 0:O.price),children:Object(g.jsx)(A.a,{})}),Object(g.jsx)(D.a.Link,{onClick:function(){return L(O)},children:Object(g.jsx)(J.a,{})})]}),(!m||O.authorDto.username!==m.username&&y)&&Object(g.jsx)(D.a.Link,{onClick:function(){return I(O)},children:Object(g.jsx)(G.a,{})})]})]}),Object(g.jsxs)(F.a,{show:C,onHide:U,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(g.jsx)(F.a.Header,{closeButton:!0,children:Object(g.jsx)(F.a.Title,{children:null===O||void 0===O?void 0:O.title})}),Object(g.jsx)(F.a.Body,{children:Object(g.jsxs)(D.a,{children:[Object(g.jsxs)(D.a.Body,{children:[Object(g.jsxs)(D.a.Title,{children:[null===O||void 0===O||null===(o=O.authorDto)||void 0===o?void 0:o.firstname," ",null===O||void 0===O||null===(r=O.authorDto)||void 0===r?void 0:r.lastname]}),Object(g.jsxs)(D.a.Subtitle,{className:"mb-2 text-muted",children:["$",null===O||void 0===O?void 0:O.price]}),Object(g.jsxs)(D.a.Text,{children:[null===O||void 0===O?void 0:O.description," "]})]}),Object(g.jsx)(D.a.Body,{children:m&&(null===O||void 0===O||null===(s=O.authorDto)||void 0===s?void 0:s.username)===m.username&&Object(g.jsxs)("div",{children:[Object(g.jsx)(D.a.Link,{href:"/book/edit?id="+(null===O||void 0===O?void 0:O.id)+"&&title="+(null===O||void 0===O?void 0:O.title)+"&description="+(null===O||void 0===O?void 0:O.description),children:Object(g.jsx)(A.a,{})}),Object(g.jsx)(D.a.Link,{onClick:function(){return L(O)},children:Object(g.jsx)(J.a,{})})]})})]})}),Object(g.jsx)(F.a.Footer,{children:Object(g.jsx)(x.a,{variant:"secondary",onClick:U,children:"Close"})})]})]})},z=n(76),M=n.n(z),V=z.Search.SearchBar,H=function(){var e=Object(l.a)(f),t=e.setShow,n=e.setMessage,o=Object(a.useState)([]),r=Object(i.a)(o,2),s=r[0],c=r[1],d=Object(a.useState)(void 0),u=Object(i.a)(d,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var e=O.getCurrentUser();e&&b(e)}),[]),Object(a.useEffect)((function(){try{N.getAllBooks().then((function(e){c(e.data)}),(function(e){var a,o,r,s,i="Unexpected error. Pleaser try again!";"ERROR"===(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(o=a.data[0])||void 0===o?void 0:o.responseType)&&(i=null===e||void 0===e||null===(r=e.response)||void 0===r||null===(s=r.data[0])||void 0===s?void 0:s.message);t(!0),n(i),c([])}))}catch(i){var e,a,o,r,s="Unexpected error. Pleaser try again!";if("ERROR"===(null===i||void 0===i||null===(e=i.response)||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.responseType))s=null===i||void 0===i||null===(o=i.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.message;t(!0),n(s),c([])}}),[]);var v=[{dataField:"title",text:"Title",sort:!0},{dataField:"price",text:"Price",formatter:function(e,t){return Object(g.jsxs)("span",{children:["$ ",e," "]})},sort:!0},{dataField:"authorDto",text:"Author",formatter:function(e,t){return Object(g.jsxs)("span",{children:[t.authorDto.firstname," ",t.authorDto.lastname," "]})},sort:!0}],p={renderer:function(e){return Object(g.jsx)(q,{book:e,user:j,view:!0})},showExpandColumn:!0,expandHeaderColumnRenderer:function(e){return e.isAnyExpands?Object(g.jsx)("b",{children:Object(g.jsx)(B.b,{})}):Object(g.jsx)("b",{children:Object(g.jsx)(B.a,{})})},expandColumnRenderer:function(e){return e.expanded?Object(g.jsx)("b",{children:"-"}):Object(g.jsx)("b",{children:"..."})}};return Object(g.jsx)("article",{style:{padding:"50px"},children:Object(g.jsx)(M.a,{bootstrap4:!0,keyField:"id",data:s,columns:v,filter:L()(),search:!0,children:function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"List of books"}),Object(g.jsx)(V,Object(C.a)(Object(C.a)({},e.searchProps),{},{style:{width:"75rem",margin:"auto"},srText:"Search book by title"})),Object(g.jsx)("hr",{}),Object(g.jsx)(P.a,Object(C.a)(Object(C.a)({},e.baseProps),{},{noDataIndication:"No Book found",expandRow:p,pagination:U()({sizePerPage:5})}))]})}})})},$=(n(102),n(18)),Y="id",_="title",Z="description",W="price",K=function(){var e=Object(s.c)(),t=Object(i.a)(e,1)[0],n=Object(c.m)(),o=Object(a.useState)(void 0),r=Object(i.a)(o,2),j=(r[0],r[1]),b=Object(a.useState)(""),v=Object(i.a)(b,2),p=v[0],k=v[1],S=Object(a.useState)(""),C=Object(i.a)(S,2),T=C[0],R=C[1],P=Object(a.useState)(""),E=Object(i.a)(P,2),U=E[0],I=E[1],L=Object(a.useState)(0),B=Object(i.a)(L,2),D=B[0],F=B[1],G=Object(a.useState)({}),A=Object(i.a)(G,2),J=A[0],q=A[1],z=Object(a.useState)(!1),M=Object(i.a)(z,2),V=M[0],H=M[1],K=Object(l.a)(f),Q=K.setShow,X=K.setMessage;Object(a.useEffect)((function(){var e=O.getCurrentUser();e&&(console.log(e),j(e))}),[]),Object(a.useEffect)((function(){var e=Object.fromEntries(Object($.a)(t));e[Y]?k(e[Y]):k(""),e[_]?R(e[_]):R(""),e[Z]?I(e[Z]):I(""),e[W]?F(e[W]):F("")}),[t]);var ee=function(){var e=Object(u.a)(Object(d.a)().mark((function e(t){var a,o,r,s,i,c,l,u,j,b,v;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=te(),!(Object.keys(a).length>0)){e.next=7;break}q(a),H(!1),e.next=21;break;case 7:if(H(!0),e.prev=8,!p){e.next=14;break}return e.next=12,N.updateBook(p,T,U,D).then((function(e){Q(!0),X("Updated book: "+T),setTimeout((function(){n("/"),window.location.reload()}),1e3)}),(function(e){if(console.log(JSON.stringify(e)),"Network Error"===e.message){var t,a,o,r,s="Session expired. You will be redirected to login page!";if("ERROR"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.responseType))s=null===e||void 0===e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message;Q(!0),X(s),setTimeout((function(){O.logout(),n("/login")}),3e3)}else{var i,c;console.log(JSON.stringify(e));var l,d,u="Unexpected error. Please try again!";if("ERROR"===(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(c=i.data[0])||void 0===c?void 0:c.responseType))u=null===e||void 0===e||null===(l=e.response)||void 0===l||null===(d=l.data[0])||void 0===d?void 0:d.message;Q(!0),X(u)}}));case 12:e.next=16;break;case 14:return e.next=16,N.createBook(T,U,D).then((function(e){Q(!0),X("Created book: "+T),setTimeout((function(){n("/home"),window.location.reload()}),3e3)}),(function(e){if("Network Error"===e.message){var t,a,o,r,s="Session expired. You will be redirected to login page!";if("ERROR"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data[0])||void 0===a?void 0:a.responseType))s=null===e||void 0===e||null===(o=e.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.message;Q(!0),X(s),setTimeout((function(){O.logout(),n("/login")}),3e3)}else{var i,c,l,d,u="Unexpected error. Please try again!";if("ERROR"===(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(c=i.data[0])||void 0===c?void 0:c.responseType))u=null===e||void 0===e||null===(l=e.response)||void 0===l||null===(d=l.data[0])||void 0===d?void 0:d.message;Q(!0),X(u)}}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),"Network Error"===e.t0.message?(s="Session expired. You will be redirected to login page!","ERROR"===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(r=o.data[0])||void 0===r?void 0:r.responseType)&&(s=null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(c=i.data[0])||void 0===c?void 0:c.message),Q(!0),X(s),setTimeout((function(){n("/login")}),3e3)):(j="Unexpected error. Please try again!","ERROR"===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(u=l.data[0])||void 0===u?void 0:u.responseType)&&(j=null===e.t0||void 0===e.t0||null===(b=e.t0.response)||void 0===b||null===(v=b.data[0])||void 0===v?void 0:v.message),Q(!0),X(j));case 21:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e={};return T&&""!==T?T.length<3?e.title="Title is too short!":T.length>255&&(e.title="Title is too long!"):e.title="Title cannot be blank!",U&&""!==U?U.length<20?e.description="Description is too short!":U.length>65535&&(e.description="Description is too long!"):e.description="Description cannot be blank!",D||(e.price="Price cannot be blank!"),e};return Object(g.jsx)("article",{style:{padding:"50px"},children:Object(g.jsxs)(h.a,{noValidate:!0,validated:V,onSubmit:ee,children:[Object(g.jsx)("h3",{children:p?"Update book":"Add new book"}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"6",controlId:"title",children:[Object(g.jsx)(h.a.Label,{children:"Title"}),Object(g.jsx)(h.a.Control,{required:!0,type:"text",placeholder:"Title",value:T,onChange:function(e){return R(e.target.value)},isInvalid:!!J.title}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.title})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"6",controlId:"Description",children:[Object(g.jsx)(h.a.Label,{children:"Description"}),Object(g.jsx)(h.a.Control,{required:!0,type:"textarea",as:"textarea",rows:3,placeholder:"Short description",value:U,onChange:function(e){return I(e.target.value)},isInvalid:!!J.description}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.description})]})}),Object(g.jsx)(y.a,{className:"mb-3",children:Object(g.jsxs)(h.a.Group,{as:m.a,md:"6",controlId:"price",children:[Object(g.jsx)(h.a.Label,{children:"Price"}),Object(g.jsxs)(w.a,{hasValidation:!0,children:[Object(g.jsx)(w.a.Text,{id:"inputGroupPrepend",children:"$"}),Object(g.jsx)(h.a.Control,{type:"number",placeholder:"Price","aria-describedby":"inputGroupPrepend",required:!0,value:D,onChange:function(e){return F(e.target.value)},isInvalid:!!J.price}),Object(g.jsx)(h.a.Control.Feedback,{type:"invalid",children:J.price})]})]})}),Object(g.jsx)(x.a,{type:"submit",children:"Submit book"})]})})},Q="id",X=function(){var e=Object(s.c)(),t=Object(i.a)(e,1)[0],n=Object(c.m)(),o=Object(l.a)(f),r=o.setShow,d=o.setMessage,u=Object(a.useState)(void 0),j=Object(i.a)(u,2),b=j[0],v=j[1],p=Object(a.useState)(void 0),h=Object(i.a)(p,2),m=h[0],x=h[1];return Object(a.useEffect)((function(){var e=O.getCurrentUser();e&&x(e)}),[]),Object(a.useEffect)((function(){var e=Object.fromEntries(Object($.a)(t));e[Q]?N.readBook(e[Q]).then((function(e){v(e.data)})).catch((function(e){if("Network Error"===e.message){var t,a,o,s,i="Session expired. You will be redirected to login page!";if("ERROR"===(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data[0])||void 0===a?void 0:a.responseType))i=null===e||void 0===e||null===(o=e.response)||void 0===o||null===(s=o.data[0])||void 0===s?void 0:s.message;r(!0),d(i),setTimeout((function(){O.logout(),n("/login")}),1e3)}else{var c,l,u,j,b="Unexpected error. Please try again!";if("ERROR"===(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(l=c.data[0])||void 0===l?void 0:l.responseType))b=null===e||void 0===e||null===(u=e.response)||void 0===u||null===(j=u.data[0])||void 0===j?void 0:j.message;r(!0),d(b)}})):n("/home")}),[t]),Object(g.jsxs)("article",{style:{padding:"50px"},children:[Object(g.jsx)("h3",{children:"Book Details"}),b&&m?Object(g.jsx)(q,{book:b,user:m}):Object(g.jsx)("div",{})]})},ee=n(77),te=n(111),ne=function(){return Object(g.jsxs)("article",{style:{padding:"100px"},children:[Object(g.jsx)("h1",{children:"Oops!"}),Object(g.jsx)("p",{children:"Page Not Found"}),Object(g.jsx)("div",{className:"flexGrow",children:Object(g.jsx)(s.b,{to:"/",children:"Visit Our Homepage"})})]})};var ae=function(){var e=Object(a.useState)(void 0),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(l.a)(f),d=r.show,u=r.setShow,j=r.message,b=Object(c.m)();return Object(a.useEffect)((function(){var e=O.getCurrentUser();e&&o(e)}),[]),Object(g.jsxs)("div",{children:[Object(g.jsxs)("nav",{className:"navbar navbar-expand navbar-green bg-light",children:[Object(g.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(s.b,{to:"/home",className:"nav-link",children:"BookStore"})}),n&&Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(s.b,{to:"/book/edit",className:"nav-link",children:"Add book"})})]}),n?Object(g.jsxs)("div",{className:"navbar-nav ms-auto",children:[Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsxs)("span",{className:"nav-link",children:["Hi ",n.username,"!"]})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)("a",{href:"/logout",className:"nav-link",onClick:function(){O.logout(),b("/home")},children:"Logout"})})]}):Object(g.jsxs)("div",{className:"navbar-nav ms-auto",children:[Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(s.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(s.b,{to:"/signup",className:"nav-link",children:"Sign up"})})]})]}),Object(g.jsx)("div",{className:"container mt-3",children:Object(g.jsxs)(c.d,{children:[Object(g.jsx)(c.b,{path:"/",element:Object(g.jsx)(H,{})}),Object(g.jsx)(c.b,{path:"/home",element:Object(g.jsx)(H,{})}),Object(g.jsx)(c.b,{path:"/login",element:Object(g.jsx)(k,{})}),Object(g.jsx)(c.b,{path:"/logout",element:Object(g.jsx)(c.a,{to:"/home"})}),Object(g.jsx)(c.b,{path:"/signup",element:Object(g.jsx)(S,{})}),Object(g.jsx)(c.b,{path:"/book/edit",element:Object(g.jsx)(K,{})}),Object(g.jsx)(c.b,{path:"/book/view",element:Object(g.jsx)(X,{})}),Object(g.jsx)(c.b,{path:"*",element:Object(g.jsx)(ne,{})})]})}),Object(g.jsx)(te.a,{position:"top-end",className:"p-3",children:Object(g.jsx)(ee.a,{onClose:function(){return u(!1)},show:d,delay:3e3,autohide:!0,className:"p-3",position:"top-start",children:Object(g.jsx)(ee.a.Body,{children:j})})})]})};r.a.render(Object(g.jsx)(s.a,{children:Object(g.jsx)(ae,{})}),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.33ed369d.chunk.js.map